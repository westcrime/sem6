!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r():"function"==typeof define&&define.amd?define(r):(e="undefined"!=typeof globalThis?globalThis:e||self).socketio=r()}(this,(function(){"use strict";function _typeof$1(e){return _typeof$1="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$1(e)}function _slicedToArray$1(e,r){return function _arrayWithHoles(e){if(Array.isArray(e))return e}(e)||function _iterableToArrayLimit(e,r){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,o,i,a,c=[],u=!0,s=!1;try{if(i=(t=t.call(e)).next,0===r){if(Object(t)!==t)return;u=!1}else for(;!(u=(n=i.call(t)).done)&&(c.push(n.value),c.length!==r);u=!0);}catch(e){s=!0,o=e}finally{try{if(!u&&null!=t.return&&(a=t.return(),Object(a)!==a))return}finally{if(s)throw o}}return c}}(e,r)||_unsupportedIterableToArray$1(e,r)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _toConsumableArray$1(e){return function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray$1(e)}(e)||function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||_unsupportedIterableToArray$1(e)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray$1(e,r){if(e){if("string"==typeof e)return _arrayLikeToArray$1(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray$1(e,r):void 0}}function _arrayLikeToArray$1(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var e=[{arrayNonindexKeys:{testPlainObjects:!0,test:function test(e,r){return!!Array.isArray(e)&&(Object.keys(e).some((function(e){return String(Number.parseInt(e))!==e}))&&(r.iterateIn="object",r.addLength=!0),!0)},replace:function replace(e,r){return r.iterateUnsetNumeric=!0,e},revive:function revive(e){if(Array.isArray(e))return e;var r=[];return Object.entries(e).forEach((function(e){var t=_slicedToArray$1(e,2),n=t[0],o=t[1];r[n]=o})),r}}},{sparseUndefined:{test:function test(e,r){return void 0===e&&!1===r.ownKeys},replace:function replace(){return 0},revive:function revive(){}}}];function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function _objectSpread2(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach((function(r){_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==_typeof$1(Symbol.iterator)?function(e){return _typeof$1(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof$1(e)},_typeof(e)}function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,_toPropertyKey(n.key),n)}}function _createClass(e,r,t){return r&&_defineProperties(e.prototype,r),t&&_defineProperties(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function _defineProperty(e,r,t){return(r=_toPropertyKey(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function _slicedToArray(e,r){return function _arrayWithHoles(e){if(Array.isArray(e))return e}(e)||function _iterableToArrayLimit(e,r){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,o,i,a,c=[],u=!0,s=!1;try{if(i=(t=t.call(e)).next,0===r){if(Object(t)!==t)return;u=!1}else for(;!(u=(n=i.call(t)).done)&&(c.push(n.value),c.length!==r);u=!0);}catch(e){s=!0,o=e}finally{try{if(!u&&null!=t.return&&(a=t.return(),Object(a)!==a))return}finally{if(s)throw o}}return c}}(e,r)||_unsupportedIterableToArray(e,r)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(e,r){if(e){if("string"==typeof e)return _arrayLikeToArray(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(e,r):void 0}}function _arrayLikeToArray(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function _toPropertyKey(e){var r=function _toPrimitive(e,r){if("object"!=_typeof$1(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,r||"default");if("object"!=_typeof$1(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}(e,"string");return"symbol"==_typeof$1(r)?r:String(r)}var r=_createClass((function TypesonPromise(e){_classCallCheck(this,TypesonPromise),this.p=new Promise(e)}));r.__typeson__type__="TypesonPromise","undefined"!=typeof Symbol&&Object.defineProperty(r.prototype,Symbol.toStringTag,{get:function get(){return"TypesonPromise"}}),r.prototype.then=function(e,t){var n=this;return new r((function(r,o){n.p.then((function(t){r(e?e(t):t)})).catch((function(e){return t?t(e):Promise.reject(e)})).then(r,o)}))},r.prototype.catch=function(e){return this.then((function(){}),e)},r.resolve=function(e){return new r((function(r){r(e)}))},r.reject=function(e){return new r((function(r,t){t(e)}))},r.all=function(e){return new r((function(r,t){Promise.all(e.map((function(e){return null!=e&&e.constructor&&"__typeson__type__"in e.constructor&&"TypesonPromise"===e.constructor.__typeson__type__?e.p:e}))).then(r,t)}))},r.race=function(e){return new r((function(r,t){Promise.race(e.map((function(e){return null!=e&&e.constructor&&"__typeson__type__"in e.constructor&&"TypesonPromise"===e.constructor.__typeson__type__?e.p:e}))).then(r,t)}))},r.allSettled=function(e){return new r((function(r,t){Promise.allSettled(e.map((function(e){return null!=e&&e.constructor&&"__typeson__type__"in e.constructor&&"TypesonPromise"===e.constructor.__typeson__type__?e.p:e}))).then(r,t)}))};var t=Object.hasOwn,n=Object.getPrototypeOf;function isThenable(e,r){return isObject(e)&&"function"==typeof e.then&&(!r||"function"==typeof e.catch)}function toStringTag(e){return Object.prototype.toString.call(e).slice(8,-1)}function hasConstructorOf(e,r){if(!e||"object"!==_typeof(e))return!1;var o=n(e);if(!o)return null===r;var i=t(o,"constructor")&&o.constructor;return"function"!=typeof i?null===r:r===i||null!==r&&Function.prototype.toString.call(i)===Function.prototype.toString.call(r)||"function"==typeof r&&"string"==typeof i.__typeson__type__&&i.__typeson__type__===r.__typeson__type__}function isPlainObject(e){return!(!e||"Object"!==toStringTag(e))&&(!n(e)||hasConstructorOf(e,Object))}function isObject(e){return null!==e&&"object"===_typeof(e)}function escapeKeyPathComponent(e){return e.replaceAll("''","''''").replace(/^$/,"''").replaceAll("~","~0").replaceAll(".","~1")}function unescapeKeyPathComponent(e){return e.replaceAll("~1",".").replaceAll("~0","~").replace(/^''$/,"").replaceAll("''''","''")}function getByKeyPath(e,r){if(""===r)return e;if(null===e||"object"!==_typeof(e))throw new TypeError("Unexpected non-object type");var t=r.indexOf(".");if(t>-1){var n=e[unescapeKeyPathComponent(r.slice(0,t))];return void 0===n?void 0:getByKeyPath(n,r.slice(t+1))}return e[unescapeKeyPathComponent(r)]}function setAtKeyPath(e,r,t){if(""===r)return t;if(!e||"object"!==_typeof(e))throw new TypeError("Unexpected non-object type");var n=r.indexOf(".");return n>-1?setAtKeyPath(e[unescapeKeyPathComponent(r.slice(0,n))],r.slice(n+1),t):(e[unescapeKeyPathComponent(r)]=t,e)}function getJSONType(e){return null===e?"null":Array.isArray(e)?"array":_typeof(e)}function _await(e,r,t){return t?r?r(e):e:(e&&e.then||(e=Promise.resolve(e)),r?e.then(r):e)}var o=Object.keys,i=Object.hasOwn,a=Array.isArray,c=["type","replaced","iterateIn","iterateUnsetNumeric","addLength"];function _async(e){return function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];try{return Promise.resolve(e.apply(this,r))}catch(e){return Promise.reject(e)}}}function nestedPathsFirst(e,r){var t,n;if(""===e.keypath)return-1;var o=null!==(t=e.keypath.match(/\./g))&&void 0!==t?t:0,i=null!==(n=r.keypath.match(/\./g))&&void 0!==n?n:0;return o&&(o=o.length),i&&(i=i.length),o>i?-1:o<i?1:e.keypath<r.keypath?-1:e.keypath>r.keypath?1:0}!function(){function Typeson(e){_classCallCheck(this,Typeson),this.options=e,this.plainObjectReplacers=[],this.nonplainObjectReplacers=[],this.revivers={},this.types={}}_createClass(Typeson,[{key:"stringify",value:function stringify(e,r,t,n){n=_objectSpread2(_objectSpread2(_objectSpread2({},this.options),n),{},{stringification:!0});var o=this.encapsulate(e,null,n);return a(o)?JSON.stringify(o[0],r,t):o.then((function(e){return JSON.stringify(e,r,t)}))}},{key:"stringifySync",value:function stringifySync(e,r,t,n){return this.stringify(e,r,t,_objectSpread2(_objectSpread2({throwOnBadSyncType:!0},n),{},{sync:!0}))}},{key:"stringifyAsync",value:function stringifyAsync(e,r,t,n){return this.stringify(e,r,t,_objectSpread2(_objectSpread2({throwOnBadSyncType:!0},n),{},{sync:!1}))}},{key:"parse",value:function parse(e,r,t){return t=_objectSpread2(_objectSpread2(_objectSpread2({},this.options),t),{},{parse:!0}),this.revive(JSON.parse(e,r),t)}},{key:"parseSync",value:function parseSync(e,r,t){return this.parse(e,r,_objectSpread2(_objectSpread2({throwOnBadSyncType:!0},t),{},{sync:!0}))}},{key:"parseAsync",value:function parseAsync(e,r,t){return this.parse(e,r,_objectSpread2(_objectSpread2({throwOnBadSyncType:!0},t),{},{sync:!1}))}},{key:"specialTypeNames",value:function specialTypeNames(e,r){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t.returnTypeNames=!0,this.encapsulate(e,r,t)}},{key:"rootTypeName",value:function rootTypeName(e,r){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t.iterateNone=!0,this.encapsulate(e,r,t)}},{key:"encapsulate",value:function encapsulate(e,t,n){var u=this,s=_objectSpread2(_objectSpread2({sync:!0},this.options),n),f=s.sync,l={},y=[],p=[],v=[],b=!("cyclic"in s)||s.cyclic,d=s.encapsulateObserver,h=function finish(e){var r=Object.values(l);if(s.iterateNone)return r.length?r[0]:getJSONType(e);if(r.length){if(s.returnTypeNames)return function _toConsumableArray(e){return function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}(e)||function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||_unsupportedIterableToArray(e)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(new Set(r));e&&isPlainObject(e)&&!i(e,"$types")?e.$types=l:e={$:e,$types:{$:l}}}else isObject(e)&&i(e,"$types")&&(e={$:e,$types:!0});return!s.returnTypeNames&&e},m=_async((function(e,t){return _await(Promise.all(t.map((function(e){return e[1].p}))),(function(n){return _await(Promise.all(n.map(_async((function(n){var o=!1,i=[],a=_slicedToArray(t.splice(0,1),1),c=_slicedToArray(a[0],7),u=c[0],s=c[2],f=c[3],l=c[4],y=c[5],p=c[6],v=g(u,n,s,f,i,!0,p),b=hasConstructorOf(v,r);return function _invoke(e,r){var t=e();return t&&t.then?t.then(r):r(t)}((function(){if(u&&b)return _await(v.p,(function(r){l[y]=r;var t=m(e,i);return o=!0,t}))}),(function(r){return o?r:(u?l[y]=v:e=b?v.p:v,m(e,i))}))})))),(function(){return e}))}))})),_=function _adaptBuiltinStateObjectProperties(e,r,t){Object.assign(e,r);var n=c.map((function(r){var t=e[r];return delete e[r],t}));t(),c.forEach((function(r,t){e[r]=n[t]}))},g=function _encapsulate(e,t,n,c,f,v,b){var h,m={},g=_typeof(t),O=d?function(o){var i,a=null!==(i=null!=b?b:c.type)&&void 0!==i?i:getJSONType(t);d(Object.assign(null!=o?o:m,{keypath:e,value:t,cyclic:n,stateObj:c,promisesData:f,resolvingTypesonPromise:v,awaitingTypesonPromise:hasConstructorOf(t,r)},{type:a}))}:null;if(["string","boolean","number","undefined"].includes(g))return void 0===t||Number.isNaN(t)||t===Number.NEGATIVE_INFINITY||t===Number.POSITIVE_INFINITY||0===t?(h=c.replaced?t:A(e,t,c,f,!1,v,O))!==t&&(m={replaced:h}):h=t,O&&O(),h;if(null===t)return O&&O(),t;if(n&&!c.iterateIn&&!c.iterateUnsetNumeric&&t&&"object"===_typeof(t)){var S=y.indexOf(t);if(!(S<0))return l[e]="#",O&&O({cyclicKeypath:p[S]}),"#"+p[S];!0===n&&(y.push(t),p.push(e))}var j,w,T=isPlainObject(t),N=a(t),I=(T||N)&&(!u.plainObjectReplacers.length||c.replaced)||c.iterateIn?t:A(e,t,c,f,T||N,null,O);if(I!==t?(h=I,m={replaced:I}):""===e&&hasConstructorOf(t,r)?(f.push([e,t,n,c,void 0,void 0,c.type]),h=t):N&&"object"!==c.iterateIn||"array"===c.iterateIn?(j=new Array(t.length),m={clone:j}):(["function","symbol"].includes(_typeof(t))||"toJSON"in t||hasConstructorOf(t,r)||hasConstructorOf(t,Promise)||hasConstructorOf(t,ArrayBuffer))&&!T&&"object"!==c.iterateIn?h=t:(j={},c.addLength&&(j.length=t.length),m={clone:j}),O&&O(),s.iterateNone)return null!==(w=j)&&void 0!==w?w:h;if(!j)return h;if(c.iterateIn){var P=function _loop(o){var a={ownKeys:i(t,o)};_(c,a,(function(){var i=e+(e?".":"")+escapeKeyPathComponent(o),a=_encapsulate(i,t[o],Boolean(n),c,f,v);hasConstructorOf(a,r)?f.push([i,a,Boolean(n),c,j,o,c.type]):void 0!==a&&(j[o]=a)}))};for(var C in t)P(C);O&&O({endIterateIn:!0,end:!0})}else o(t).forEach((function(o){var i=e+(e?".":"")+escapeKeyPathComponent(o);_(c,{ownKeys:!0},(function(){var e=_encapsulate(i,t[o],Boolean(n),c,f,v);hasConstructorOf(e,r)?f.push([i,e,Boolean(n),c,j,o,c.type]):void 0!==e&&(j[o]=e)}))})),O&&O({endIterateOwn:!0,end:!0});if(c.iterateUnsetNumeric){for(var E=t.length,k=function _loop2(o){if(!(o in t)){var i="".concat(e).concat(e?".":"").concat(o);_(c,{ownKeys:!1},(function(){var e=_encapsulate(i,void 0,Boolean(n),c,f,v);hasConstructorOf(e,r)?f.push([i,e,Boolean(n),c,j,o,c.type]):void 0!==e&&(j[o]=e)}))}},$=0;$<E;$++)k($);O&&O({endIterateUnsetNumeric:!0,end:!0})}return j},A=function replace(e,r,t,n,o,i,a){for(var c=o?u.plainObjectReplacers:u.nonplainObjectReplacers,s=c.length;s--;){var y=c[s];if(y.test(r,t)){var p=y.type;if(u.revivers[p]){var v=l[e];l[e]=v?[p].concat(v):p}if(Object.assign(t,{type:p,replaced:!0}),(f||!y.replaceAsync)&&!y.replace)return a&&a({typeDetected:!0}),g(e,r,b&&"readonly",t,n,i,p);a&&a({replacing:!0});var d=void 0;if(f||!y.replaceAsync){if(void 0===y.replace)throw new TypeError("Missing replacer");d=y.replace(r,t)}else d=y.replaceAsync(r,t);return g(e,d,b&&"readonly",t,n,i,p)}}return r},O=g("",e,b,null!=t?t:{},v);if(v.length)return f&&s.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():Promise.resolve(m(O,v)).then(h);if(!f&&s.throwOnBadSyncType)throw new TypeError("Async method requested but sync result obtained");return s.stringification&&f?[h(O)]:f?h(O):Promise.resolve(h(O))}},{key:"encapsulateSync",value:function encapsulateSync(e,r,t){return this.encapsulate(e,r,_objectSpread2(_objectSpread2({throwOnBadSyncType:!0},t),{},{sync:!0}))}},{key:"encapsulateAsync",value:function encapsulateAsync(e,r,t){return this.encapsulate(e,r,_objectSpread2(_objectSpread2({throwOnBadSyncType:!0},t),{},{sync:!1}))}},{key:"revive",value:function revive(e,t){var n=this,i=_objectSpread2(_objectSpread2({sync:!0},this.options),t),c=i.sync;function finishRevival(e){if(c)return e;if(i.throwOnBadSyncType)throw new TypeError("Async method requested but sync result obtained");return Promise.resolve(e)}if(!e||"object"!==_typeof(e)||Array.isArray(e))return finishRevival(e);var s=e.$types;if(!0===s)return finishRevival(e.$);if(!s||"object"!==_typeof(s)||Array.isArray(s))return finishRevival(e);var f=[],l={},y=!0;s.$&&isPlainObject(s.$)&&(e=e.$,s=s.$,y=!1);var p=function executeReviver(e,r){var t,o=_slicedToArray(null!==(t=n.revivers[e])&&void 0!==t?t:[],1)[0];if(!o)throw new Error("Unregistered type: "+e);if(c&&!("revive"in o))return r;if(!c&&o.reviveAsync)return o.reviveAsync(r,l);if(o.revive)return o.revive(r,l);throw new Error("Missing reviver")},v=[];function checkUndefined(e){return hasConstructorOf(e,u)?void 0:e}var b,d=function revivePlainObjects(){var t=[];if(!s)throw new Error("Found bad `types`");if(Object.entries(s).forEach((function(e){var r=_slicedToArray(e,2),o=r[0],i=r[1];"#"!==i&&[].concat(i).forEach((function(e){var r;_slicedToArray(null!==(r=n.revivers[e])&&void 0!==r?r:[null,{}],2)[1].plain&&(t.push({keypath:o,type:e}),delete s[o])}))})),t.length)return t.sort(nestedPathsFirst).reduce((function reducer(t,n){var o=n.keypath,i=n.type;if(isThenable(t))return t.then((function(e){return reducer(e,{keypath:o,type:i})}));var a=getByKeyPath(e,o);if(hasConstructorOf(a=p(i,a),r))return a.then((function(r){var t=setAtKeyPath(e,o,r);t===r&&(e=t)}));var c=setAtKeyPath(e,o,a);c===a&&(e=c)}),void 0)}();return hasConstructorOf(d,r)?b=d.then((function(){return e})):(b=function _revive(e,t,n,i,c){if(!y||"$types"!==e){var l=s[e],b=a(t);if(b||isPlainObject(t)){var d=b?new Array(t.length):{};for(o(t).forEach((function(o){var i=_revive(e+(e?".":"")+escapeKeyPathComponent(o),t[o],null!=n?n:d,d,o),a=function set(e){return hasConstructorOf(e,u)?d[o]=void 0:void 0!==e&&(d[o]=e),e};hasConstructorOf(i,r)?v.push(i.then((function(e){return a(e)}))):a(i)})),t=d;f.length;){var h=_slicedToArray(f[0],4),m=h[0],_=h[1],g=h[2],A=h[3],O=getByKeyPath(m,_);if(void 0===O)break;g[A]=O,f.splice(0,1)}}if(!l)return t;if("#"===l){var S=getByKeyPath(n,t.slice(1));return void 0===S&&f.push([n,t.slice(1),i,c]),S}return[].concat(l).reduce((function reducer(e,t){if(hasConstructorOf(e,r))return e.then((function(e){return reducer(e,t)}));if("string"!=typeof t)throw new TypeError("Bad type JSON");return p(t,e)}),t)}}("",e,null),v.length&&(b=r.resolve(b).then((function(e){return r.all([e].concat(v))})).then((function(e){return _slicedToArray(e,1)[0]})))),isThenable(b)?c&&i.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():hasConstructorOf(b,r)?b.p.then(checkUndefined):b:!c&&i.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():c?checkUndefined(b):Promise.resolve(checkUndefined(b))}},{key:"reviveSync",value:function reviveSync(e,r){return this.revive(e,_objectSpread2(_objectSpread2({throwOnBadSyncType:!0},r),{},{sync:!0}))}},{key:"reviveAsync",value:function reviveAsync(e,r){return this.revive(e,_objectSpread2(_objectSpread2({throwOnBadSyncType:!0},r),{},{sync:!1}))}},{key:"register",value:function register(e,r){var t=this,n=null!=r?r:{},i=function R(e){a(e)?e.forEach((function(e){return R(e)})):o(e).forEach((function(r){var o;if("#"===r)throw new TypeError("# cannot be used as a type name as it is reserved for cyclic objects");if(s.includes(r))throw new TypeError("Plain JSON object types are reserved as type names");var i=e[r],c=i&&"function"!=typeof i&&!Array.isArray(i)&&i.testPlainObjects?t.plainObjectReplacers:t.nonplainObjectReplacers,u=c.filter((function(e){return e.type===r}));if(u.length&&(c.splice(c.indexOf(u[0]),1),delete t.revivers[r],delete t.types[r]),"function"==typeof i){var f=i;i={test:function test(e){return e&&e.constructor===f},replace:function replace(e){return _objectSpread2({},e)},revive:function revive(e){return Object.assign(Object.create(f.prototype),e)}}}else if(a(i)){var l=_slicedToArray(i,3);i={test:l[0],replace:l[1],revive:l[2]}}if(null!==(o=i)&&void 0!==o&&o.test){var y={type:r,test:i.test.bind(i)};i.replace&&(y.replace=i.replace.bind(i)),i.replaceAsync&&(y.replaceAsync=i.replaceAsync.bind(i));var p="number"==typeof n.fallback?n.fallback:n.fallback?0:Number.POSITIVE_INFINITY;if(i.testPlainObjects?t.plainObjectReplacers.splice(p,0,y):t.nonplainObjectReplacers.splice(p,0,y),i.revive||i.reviveAsync){var v={};i.revive&&(v.revive=i.revive.bind(i)),i.reviveAsync&&(v.reviveAsync=i.reviveAsync.bind(i)),t.revivers[r]=[v,{plain:i.testPlainObjects}]}t.types[r]=i}}))};return[].concat(e).forEach((function(e){return i(e)})),this}}])}();var u=_createClass((function Undefined(){_classCallCheck(this,Undefined)}));u.__typeson__type__="TypesonUndefined";var s=["null","boolean","number","string","array","object"],f={undef:{test:function test(e,r){return void 0===e&&(r.ownKeys||!("ownKeys"in r))},replace:function replace(){return 0},revive:function revive(){return new u}}},l={StringObject:{test:function test(e){return"String"===toStringTag(e)&&"object"===_typeof$1(e)},replace:String,revive:function revive(e){return new String(e)}},BooleanObject:{test:function test(e){return"Boolean"===toStringTag(e)&&"object"===_typeof$1(e)},replace:Boolean,revive:function revive(e){return new Boolean(e)}},NumberObject:{test:function test(e){return"Number"===toStringTag(e)&&"object"===_typeof$1(e)},replace:Number,revive:function revive(e){return new Number(e)}}},y=[{nan:{test:function test(e){return Number.isNaN(e)},replace:function replace(){return"NaN"},revive:function revive(){return Number.NaN}}},{infinity:{test:function test(e){return e===Number.POSITIVE_INFINITY},replace:function replace(){return"Infinity"},revive:function revive(){return Number.POSITIVE_INFINITY}}},{negativeInfinity:{test:function test(e){return e===Number.NEGATIVE_INFINITY},replace:function replace(){return"-Infinity"},revive:function revive(){return Number.NEGATIVE_INFINITY}}},{negativeZero:{test:function test(e){return Object.is(e,-0)},replace:function replace(){return 0},revive:function revive(){return-0}}}],p={date:{test:function test(e){return"Date"===toStringTag(e)},replace:function replace(e){var r=e.getTime();return Number.isNaN(r)?"NaN":r},revive:function revive(e){return"NaN"===e?new Date(Number.NaN):new Date(e)}}},v={error:{test:function test(e){return"Error"===toStringTag(e)},replace:function replace(e){return{name:e.name,message:e.message,cause:e.cause,stack:e.stack,fileName:e.fileName,lineNumber:e.lineNumber,columnNumber:e.columnNumber}},revive:function revive(e){var r=new Error(e.message);return r.name=e.name,r.cause=e.cause,r.stack=e.stack,r.fileName=e.fileName,r.lineNumber=e.lineNumber,r.columnNumber=e.columnNumber,r}}},b={};function create$2(e){b[e.name.toLowerCase()]={test:function test(r){return hasConstructorOf(r,e)},replace:function replace(e){return{name:e.name,message:e.message,cause:e.cause,stack:e.stack,fileName:e.fileName,lineNumber:e.lineNumber,columnNumber:e.columnNumber,errors:e.errors}},revive:function revive(r){var t="undefined"!=typeof AggregateError&&e===AggregateError?new e(r.errors,r.message):new e(r.message);return t.name=r.name,t.cause=r.cause,t.stack=r.stack,t.fileName=r.fileName,t.lineNumber=r.lineNumber,t.columnNumber=r.columnNumber,t}}}[TypeError,RangeError,SyntaxError,ReferenceError,EvalError,URIError].forEach((function(e){return create$2(e)})),"undefined"!=typeof AggregateError&&create$2(AggregateError),"function"==typeof InternalError&&create$2(InternalError);for(var d={regexp:{test:function test(e){return"RegExp"===toStringTag(e)},replace:function replace(e){return{source:e.source,flags:(e.global?"g":"")+(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.sticky?"y":"")+(e.unicode?"u":"")}},revive:function revive(e){var r=e.source,t=e.flags;return new RegExp(r,t)}}},h={map:{test:function test(e){return"Map"===toStringTag(e)},replace:function replace(e){return _toConsumableArray$1(e.entries())},revive:function revive(e){return new Map(e)}}},m={set:{test:function test(e){return"Set"===toStringTag(e)},replace:function replace(e){return _toConsumableArray$1(e.values())},revive:function revive(e){return new Set(e)}}},_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",g=new Uint8Array(256),A=0;A<64;A++)g[_.codePointAt(A)]=A;var O=function encode(e,r,t){null==t&&(t=e.byteLength);for(var n=new Uint8Array(e,r||0,t),o=n.length,i="",a=0;a<o;a+=3)i+=_[n[a]>>2],i+=_[(3&n[a])<<4|n[a+1]>>4],i+=_[(15&n[a+1])<<2|n[a+2]>>6],i+=_[63&n[a+2]];return o%3==2?i=i.slice(0,-1)+"=":o%3==1&&(i=i.slice(0,-2)+"=="),i},S=function decode(e){var r=e.length;if(r%4)throw new Error("Bad base64 length: not divisible by four");var t,n,o,i,a=.75*e.length,c=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);for(var u=new ArrayBuffer(a),s=new Uint8Array(u),f=0;f<r;f+=4)t=g[e.codePointAt(f)],n=g[e.codePointAt(f+1)],o=g[e.codePointAt(f+2)],i=g[e.codePointAt(f+3)],s[c++]=t<<2|n>>4,s[c++]=(15&n)<<4|o>>2,s[c++]=(3&o)<<6|63&i;return u},j={arraybuffer:{test:function test(e){return"ArrayBuffer"===toStringTag(e)},replace:function replace(e,r){r.buffers||(r.buffers=[]);var t=r.buffers.indexOf(e);return t>-1?{index:t}:(r.buffers.push(e),O(e))},revive:function revive(e,r){if(r.buffers||(r.buffers=[]),"object"===_typeof$1(e))return r.buffers[e.index];var t=S(e);return r.buffers.push(t),t}}},w={};"function"==typeof Int8Array&&[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array].concat(_toConsumableArray$1("function"==typeof BigInt64Array?[BigInt64Array,BigUint64Array]:[])).forEach((function(e){return function create$1(e){var r=e.name;w[r.toLowerCase()]={test:function test(e){return toStringTag(e)===r},replace:function replace(e,r){var t=e.buffer,n=e.byteOffset,o=e.length;r.buffers||(r.buffers=[]);var i=r.buffers.indexOf(t);return i>-1?{index:i,byteOffset:n,length:o}:(r.buffers.push(t),{encoded:O(t),byteOffset:n,length:o})},revive:function revive(r,t){t.buffers||(t.buffers=[]);var n,o=r.byteOffset,i=r.length,a=r.encoded,c=r.index;return"index"in r?n=t.buffers[c]:(n=S(a),t.buffers.push(n)),new e(n,o,i)}}}(e)}));var T={dataview:{test:function test(e){return"DataView"===toStringTag(e)},replace:function replace(e,r){var t=e.buffer,n=e.byteOffset,o=e.byteLength;r.buffers||(r.buffers=[]);var i=r.buffers.indexOf(t);return i>-1?{index:i,byteOffset:n,byteLength:o}:(r.buffers.push(t),{encoded:O(t),byteOffset:n,byteLength:o})},revive:function revive(e,r){r.buffers||(r.buffers=[]);var t,n=e.byteOffset,o=e.byteLength,i=e.encoded,a=e.index;return"index"in e?t=r.buffers[a]:(t=S(i),r.buffers.push(t)),new DataView(t,n,o)}}},N={test:function test(e){return hasConstructorOf(e,Intl.Collator)},replace:function replace(e){return e.resolvedOptions()},revive:function revive(e){return new Intl.Collator(e.locale,e)}},I={test:function test(e){return hasConstructorOf(e,Intl.DateTimeFormat)},replace:function replace(e){return e.resolvedOptions()},revive:function revive(e){return new Intl.DateTimeFormat(e.locale,e)}},P={test:function test(e){return hasConstructorOf(e,Intl.NumberFormat)},replace:function replace(e){return e.resolvedOptions()},revive:function revive(e){return new Intl.NumberFormat(e.locale,e)}},C={bigint:{test:function test(e){return"bigint"==typeof e},replace:String,revive:function revive(e){return BigInt(e)}}},E={bigintObject:{test:function test(e){return"object"===_typeof$1(e)&&hasConstructorOf(e,BigInt)},replace:String,revive:function revive(e){return new Object(BigInt(e))}}},k=[f,e,l,y,p,v,b,d].concat("function"==typeof Map?h:[],"function"==typeof Set?m:[],"function"==typeof ArrayBuffer?j:[],"function"==typeof Uint8Array?w:[],"function"==typeof DataView?T:[],"undefined"!=typeof Intl?{IntlCollator:N,IntlDateTimeFormat:I,IntlNumberFormat:P}:[],"undefined"!=typeof BigInt?[C,E]:[]),$={};return"function"==typeof Int8Array&&[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array].concat(_toConsumableArray$1("function"==typeof BigInt64Array?[BigInt64Array,BigUint64Array]:[])).forEach((function(e){return function create(e){var r=e.name;$[r.toLowerCase()]={test:function test(e){return toStringTag(e)===r},replace:function replace(e){return(0===e.byteOffset&&e.byteLength===e.buffer.byteLength?e:e.slice(0)).buffer},revive:function revive(r){return"ArrayBuffer"===toStringTag(r)?new e(r):r}}}(e)})),[k,{arraybuffer:null},$]}));
//# sourceMappingURL=socketio.umd.cjs.map
